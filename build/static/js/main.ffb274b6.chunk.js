(this["webpackJsonpchat-app-client"]=this["webpackJsonpchat-app-client"]||[]).push([[0],{118:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(19),o=a.n(r),i=(a(76),a(77),a(11)),c=a.n(i),s=a(16),m=a(18),u=a(15),d=a(6),p=a(22),g=a(7),f=a(25),E=a(27),h=a(126),v=a(121),y=a(127),b=a(66),w=a(122),j=a(123);var k=function(e){var t=new f.GiphyFetch("tivenjqL1A6W3LpKpPZ4StawMGFAcjdD"),a=Object(n.useState)(!1),r=Object(d.a)(a,2),o=r[0],i=r[1],k=function(){L({}),i(!1)},I=function(){return i(!0)},O=Object(n.useState)(null),S=Object(d.a)(O,2),x=S[0],B=S[1],_=Object(n.useState)({}),C=Object(d.a)(_,2),N=C[0],L=C[1],T=(Object(p.f)(),function(e){var t=document.getElementById("post-"+e+"-select");"emoji"===e?document.getElementById("post-gif-select").style.display="none":document.getElementById("post-emoji-select").style.display="none","block"===t.style.display?t.style.display="none":t.style.display="block"}),F=function(){var e=Object(s.a)(c.a.mark((function e(a,n){var l,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),document.getElementById("post-img-div").style.display="none",document.getElementById("post-gif-div").style.display="block",e.next=5,t.gif(a.id);case 5:return l=e.sent,r=l.data,e.next=9,L({"post-text":N["post-text"],"gif-id":r.images.preview_webp.url});case 9:B(r);case 10:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();return l.a.createElement("div",null,l.a.createElement("ul",{id:"side-nav-phone"},l.a.createElement(g.b,{to:"/user/"},l.a.createElement("li",null,l.a.createElement("i",{class:"material-icons"},"store"))),l.a.createElement(g.b,{to:"/user/explore"},l.a.createElement("li",null,l.a.createElement("i",{class:"material-icons"},"explore"))),l.a.createElement(g.b,{to:"/user/notifications"},l.a.createElement("li",null,l.a.createElement("i",{class:"material-icons"},"notifications"))),l.a.createElement(g.b,{to:"/user/messages"},l.a.createElement("li",null,l.a.createElement("i",{class:"material-icons"},"message")))),l.a.createElement("button",{id:"tweet-button-phone",onClick:I},l.a.createElement("i",{class:"material-icons"}," edit")),l.a.createElement("ul",{id:"side-nav"},l.a.createElement(g.b,{to:"/user/"},l.a.createElement("li",null,l.a.createElement("h2",null,"InstaChat"))),l.a.createElement(g.b,{to:"/user/"},l.a.createElement("li",null,l.a.createElement("i",{class:"material-icons"},"store"),"\u2003Home")),l.a.createElement(g.b,{to:"/user/explore"},l.a.createElement("li",null,l.a.createElement("i",{class:"material-icons"},"explore"),"\u2003Explore")),l.a.createElement(g.b,{to:"/user/notifications"},l.a.createElement("li",null,l.a.createElement("i",{class:"material-icons"},"notifications"),"\u2003Notifications")),l.a.createElement(g.b,{to:"/user/messages"},l.a.createElement("li",null,l.a.createElement("i",{class:"material-icons"},"message"),"\u2003Messages")),l.a.createElement(g.b,{to:"/user/profile/"+localStorage.getItem("username")},l.a.createElement("li",null,l.a.createElement("i",{class:"material-icons"},"account_circle"),"\u2003Profile")),l.a.createElement("button",{onClick:I},"Tweet")),l.a.createElement(h.a,Object.assign({show:o,onHide:k},e,{size:"md","aria-labelledby":"contained-modal-title-vcenter",centered:!0}),l.a.createElement(h.a.Header,{closeButton:!0},l.a.createElement(h.a.Title,null,"Create Post")),l.a.createElement(h.a.Body,null,l.a.createElement(v.a,{variant:"danger",style:{display:"none"},id:"post-alert"}),l.a.createElement("div",{id:"post-profile-div"},l.a.createElement("img",{src:localStorage.getItem("imageUri"),alt:"profile"}),"\u2003",l.a.createElement("span",null,l.a.createElement("strong",null,localStorage.getItem("f_name")+" "+localStorage.getItem("l_name")))),l.a.createElement(y.a,{onChange:function(e){var t=e.target.name,a=e.target.value;"post-img"===e.target.name?L(Object(u.a)({},N,Object(m.a)({},t,e.target.files[0]))):L(Object(u.a)({},N,Object(m.a)({},t,a)))},onSubmit:function(e){e.preventDefault(),document.getElementById("post-spinner").style.display="inline-block";var t=new FormData;t.append("post-text",N["post-text"]),t.append("post-gif",N["gif-id"]),t.append("image",N["post-img"]),fetch("/users/profile/post",{method:"Post",body:t,headers:{token:localStorage.getItem("token")}}).then((function(e){return e.json()})).then((function(e){if("success"===e.saved){var t=document.getElementById("post-alert");t.className="fade alert alert-success show",t.style.display="block",t.innerHTML="Your details had been saved...",setTimeout((function(){k()}),2e3)}else document.getElementById("post-spinner").style.display="none",function(e){var t=document.getElementById("post-alert");if(t.style.display="block",e.error&&(t.innerHTML+=e.error.msg),e.errors){var a=1;e.errors.map((function(e){t.innerHTML+="<p>"+a+". "+e.msg+"<br/></p>",a++}))}setTimeout((function(){t.style.display="none"}),1e4)}(e)}))}},l.a.createElement(b.a,null,l.a.createElement(y.a.Control,{plaintext:!0,as:"textarea",rows:"3",placeholder:"What's on your mind "+localStorage.getItem("f_name"),name:"post-text",id:"post-text",required:!0})),l.a.createElement(b.a,null,l.a.createElement(y.a.File,{id:"post-pic-upload",custom:!0,style:{display:"none"}},l.a.createElement(y.a.File.Input,{name:"post-img",onChange:function(e){var t=e.target.files[0],a=document.getElementById("post-alert");if("image/jpeg"!==t.type&&"image/png"!==t.type)a.style.display="block",a.innerHTML="Only .jpeg or .png files allowed...",e.target.value="";else{var n=new FileReader;n.onload=function(e){document.getElementById("post-img-show").src=e.target.result},n.readAsDataURL(t),document.getElementById("post-gif-div").style.display="none",document.getElementById("post-img-div").style.display="block"}}}))),l.a.createElement("div",{id:"post-img-div"},l.a.createElement("div",null,l.a.createElement("i",{className:"material-icons",onClick:function(){document.getElementById("post-pic-upload").value="",document.getElementById("post-img-div").style.display="none",L({"post-text":N["post-text"]})}}," ","remove_circle"),l.a.createElement("img",{src:"#",alt:"",id:"post-img-show"}))),l.a.createElement("div",{id:"post-gif-div"},x&&l.a.createElement(E.Gif,{gif:x,width:window.matchMedia("(max-width: 480px)").matches?150:200,hideAttribution:!0}),l.a.createElement("i",{className:"material-icons",onClick:function(){B(null),L({"post-text":N["post-text"]}),document.getElementById("post-gif-div").style.display="none"}}," ","remove_circle")),l.a.createElement(w.a,{variant:"primary",type:"submit",id:"post-button",style:{width:"100%"}},l.a.createElement("strong",null,"Post"),"\u2003",l.a.createElement(j.a,{animation:"border",variant:"dark",size:"sm",id:"post-spinner",style:{display:"none"}})))),l.a.createElement(h.a.Footer,{id:"post-footer"},l.a.createElement("strong",{style:{justifySelf:"left"}},"Add to your post"),l.a.createElement(w.a,{variant:"light"},l.a.createElement("i",{className:"material-icons",onClick:function(){return document.getElementById("post-pic-upload").click()}},"image")),l.a.createElement(w.a,{variant:"light"}," ",l.a.createElement("i",{className:"material-icons",onClick:function(){return T("gif")}},"gif")),l.a.createElement(w.a,{variant:"light",onClick:function(){return T("emoji")}},l.a.createElement("span",null,"\ud83d\ude04")," "),l.a.createElement("div",{id:"post-emoji-select"}," ",l.a.createElement(E.Grid,{width:window.matchMedia("(max-width: 480px)").matches?250:450,columns:window.matchMedia("(max-width: 480px)").matches?2:3,fetchGifs:function(e){return t.emoji({offset:e,limit:10})},hideAttribution:!0,onGifClick:function(e,t){return F(e,t)}})),l.a.createElement("div",{id:"post-gif-select"}," ",l.a.createElement(E.Grid,{width:window.matchMedia("(max-width: 480px)").matches?250:450,columns:window.matchMedia("(max-width: 480px)").matches?2:3,fetchGifs:function(e){return t.trending({offset:e,limit:10})},hideAttribution:!0,onGifClick:function(e,t){return F(e,t)}})))))},I=a(69),O=a.n(I),S=a(124),x=a(68),B=a(31),_=a.n(B);var C=function(){var e=Object(p.g)().id,t=Object(n.useState)({}),a=Object(d.a)(t,2),r=a[0],o=a[1];Object(n.useEffect)((function(){i(e)}),[e]);var i=function(e){fetch("/users/profile/"+e+"/posts",{method:"post",body:JSON.stringify({token:localStorage.getItem("token")}),headers:{"content-type":"application/json"}}).then((function(e){return e.json()})).then(function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("success"!==t.saved){e.next=3;break}return e.next=3,o(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},m=function(e){e.preventDefault(),e.target.style.color="blue"===e.target.style.color?"gray":"blue",console.log(e.target.id),fetch("/users/posts/like",{method:"post",body:JSON.stringify({token:localStorage.getItem("token"),post_id:e.target.id}),headers:{"content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){e.saved}))};return l.a.createElement("div",null,void 0!==r.posts?r.posts.map((function(t){return l.a.createElement("div",{key:t._id,className:"user_posts"},l.a.createElement("img",{src:localStorage.getItem("imageUri"),alt:"pic",id:"user-post-img"}),l.a.createElement("div",{id:"post_detail"},l.a.createElement("p",{id:"post-user-detail"},l.a.createElement("strong",null,localStorage.getItem("f_name")+" "+localStorage.getItem("l_name")),"\u2002",l.a.createElement("span",null,"@"+e," \xb7 ",new Date(t.date).toLocaleDateString("en-us",{day:"numeric",month:"short"}))),t.postText,l.a.createElement("br",null),t.postImg&&l.a.createElement("img",{src:t.postImg,alt:"",id:"post-detail-img"}),t.postGif&&l.a.createElement("div",{id:"post-detail-gif-div"},l.a.createElement("img",{src:t.postGif,alt:""})),l.a.createElement("div",{id:"like-share"},l.a.createElement("span",{onClick:m},l.a.createElement("i",{className:"material-icons",id:t._id},"thumb_up")," ","\u2002",t.likes),l.a.createElement("span",null,l.a.createElement("i",{className:"material-icons"}," share")," \u2002",t.shares),l.a.createElement("span",null,l.a.createElement("i",{className:"material-icons"}," message")," \u2002",t.comments.length))))})):"")};var N=function(e){var t=Object(n.useState)(!1),a=Object(d.a)(t,2),r=a[0],o=a[1],i=function(){return o(!1)},g=Object(n.useState)(!1),f=Object(d.a)(g,2),E=f[0],k=f[1],I=function(){return k(!1)},B=function(){return k(!0)},_=Object(n.useState)(!1),N=Object(d.a)(_,2),L=N[0],T=N[1],F=function(){return T(!1)},H=function(){return T(!0)},U=Object(n.useState)({}),G=Object(d.a)(U,2),P=G[0],D=G[1],M=Object(n.useState)({f_name:"",l_name:"",bio:"",location:"",username:""}),A=Object(d.a)(M,2),J=A[0],q=A[1],z=Object(p.g)().id;Object(n.useEffect)((function(){Y()}),[z]);var Y=function(){fetch("/users/profile/",{method:"POST",body:JSON.stringify({token:localStorage.getItem("token"),username:"@"+z}),headers:{"content-type":"application/json"}}).then((function(e){return e.json()})).then(function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D(t.details);case 2:localStorage.setItem("f_name",t.details.f_name),localStorage.setItem("l_name",t.details.l_name),localStorage.setItem("imageUri",t.details.imageUri),null!==document.querySelector(".follow-button")&&(document.querySelector(".follow-button").innerHTML=-1===t.details.followers.indexOf(t.id)?"Follow":"Unfollow");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},R=Object(p.f)(),W=function(e){var t=document.getElementById("edit-alert");if(t.style.display="block",e.error&&(t.innerHTML+=e.error.msg),e.errors){var a=1;e.errors.map((function(e){t.innerHTML+="<p>"+a+". "+e.msg+"<br/></p>",a++}))}setTimeout((function(){t.style.display="none"}),1e4)},K=function(e,t){e.preventDefault(),document.getElementById("upload-"+t+"-button").disabled=!0,document.getElementById(t+"-upload-spinner").style.display="inline-block";var a=e.target[0].files[0],n=new FormData;n.append("image",a);var l={method:"post",body:n,headers:{token:localStorage.getItem("token")}};fetch("/users/profile/upload/"+t+"-image",l).then((function(e){return e.json()})).then((function(e){"success"===e.saved&&("profile"===t?I():F(),Y())}))},Z=function(e,t){document.getElementById(t+"-pic-upload").className="custom-file-input "+("image/png"===e.target.files[0].type||"image/jpeg"===e.target.files[0].type?"is-valid":"is-invalid"),document.getElementById(t+"-pic-upload-label").innerHTML=e.target.files[0].name,document.getElementById("upload-"+t+"-button").disabled="is-valid"!==document.getElementById(t+"-pic-upload").className.split(" ")[1]};return l.a.createElement("div",null,l.a.createElement("div",{id:"profile-head"},l.a.createElement("strong",null,P.f_name+" "+P.l_name),l.a.createElement("br",null),P.posts&&P.posts.length," Tweets"),l.a.createElement("div",{id:"body"},""===P.coverImageUri?l.a.createElement("div",{id:"cover-image",onClick:localStorage.getItem("username")===z?H:""}):l.a.createElement("img",{id:"cover-image",src:P.coverImageUri,alt:"cover",onClick:localStorage.getItem("username")===z?H:""}),""===P.imageUri?l.a.createElement("img",{src:O.a,alt:"no profile",id:"profile-pic",onClick:localStorage.getItem("username")===z?B:""}):l.a.createElement("img",{src:P.imageUri,alt:"profile",id:"profile-pic",onClick:localStorage.getItem("username")===z?B:""}),l.a.createElement("div",{id:"profile-div"},l.a.createElement("div",{style:{justifySelf:"right",padding:"0",alignItems:"center"}},localStorage.getItem("username")===z?l.a.createElement("button",{id:"button",className:"edit-button",onClick:function(){return o(!0)}},"Edit Profile"):l.a.createElement("button",{id:"button",className:"follow-button",onClick:function(e){e.preventDefault(),fetch("/users/profile/"+z+"/follow",{method:"post",body:JSON.stringify({token:localStorage.getItem("token")}),headers:{"content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){"success"===e.saved&&Y()}))}},"Follow")),l.a.createElement("div",null,"\xa0",l.a.createElement("strong",null,P.f_name+" "+P.l_name),l.a.createElement("br",null),"\xa0",l.a.createElement("span",null,P.username)),l.a.createElement("div",null,P.bio),l.a.createElement("div",null,l.a.createElement("span",null,l.a.createElement("i",{class:"material-icons"},"location_on"),P.location+" ","\xa0",l.a.createElement("i",{class:"material-icons"}," date_range")," "," Joined "+new Date(P.join_date).toLocaleDateString("en-US",{month:"long",year:"numeric"}))),l.a.createElement("div",null,"\xa0",l.a.createElement("strong",null,(void 0===P.following?0:P.following.length)+" ")," ",l.a.createElement("span",null,"Following"),"\u2003",l.a.createElement("strong",null," "+(void 0===P.followers?0:P.followers.length)+" "),l.a.createElement("span",null,"Followers")),l.a.createElement("div",{style:{justifySelf:"center",padding:"0"}},l.a.createElement("strong",null,"Tweets")," ")),l.a.createElement("div",null,l.a.createElement(C,null)),l.a.createElement(h.a,Object.assign({show:r,onHide:i},e,{size:"md","aria-labelledby":"contained-modal-title-vcenter",centered:!0,backdrop:"static",keyboard:!1}),l.a.createElement(h.a.Header,{closeButton:""!==P.username},l.a.createElement(h.a.Title,null,"Edit Profile")),l.a.createElement(h.a.Body,null,l.a.createElement(v.a,{variant:"danger",style:{display:"none"},id:"edit-alert"}),l.a.createElement(y.a,{onChange:function(e){var t=e.target.name,a=e.target.value;q(Object(u.a)({},J,Object(m.a)({},t,a)))},onSubmit:function(e){e.preventDefault();var t=Object(u.a)({},J,{token:localStorage.getItem("token")});fetch("/users/update",{method:"Post",body:JSON.stringify(t),headers:{"content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){if("success"===e.saved){var t=document.getElementById("edit-alert");t.className="fade alert alert-success show",t.style.display="block",t.innerHTML="Your details had been saved...",z=J.username,localStorage.setItem("username",J.username),setTimeout((function(){i()}),2e3),R.push("/user/profile/"+z)}else W(e)}))}},l.a.createElement(S.a,null,l.a.createElement(x.a,null,l.a.createElement(y.a.Group,{controlId:"formBasicFirstName"},l.a.createElement(y.a.Label,null,"First Name"),l.a.createElement(y.a.Control,{type:"text",placeholder:"Enter First Name",name:"f_name",required:!0}))),l.a.createElement(x.a,null,l.a.createElement(y.a.Group,{controlId:"formBasicLastName"},l.a.createElement(y.a.Label,null,"Last Name"),l.a.createElement(y.a.Control,{type:"text",placeholder:"Enter Last Name",name:"l_name",required:!0})))),l.a.createElement(y.a.Group,{controlId:"formBasicUsername"},l.a.createElement(y.a.Label,null,"Username"),l.a.createElement(y.a.Control,{type:"text",placeholder:"Enter Username",name:"username",required:!0})),l.a.createElement(y.a.Group,{controlId:"formBasicBio"},l.a.createElement(y.a.Label,null,"Bio"),l.a.createElement(y.a.Control,{type:"bio",placeholder:"Add Your Bio",name:"bio",required:!0})),l.a.createElement(y.a.Group,{controlId:"formBasicLocation"},l.a.createElement(y.a.Label,null,"Location"),l.a.createElement(y.a.Control,{type:"text",placeholder:"Add Your location",name:"location",required:!0})),l.a.createElement(w.a,{variant:"primary",type:"submit",id:"login-button"},"Save")))),l.a.createElement(h.a,Object.assign({show:E,onHide:I},e,{size:"md","aria-labelledby":"contained-modal-title-vcenter",centered:!0,backdrop:"static"}),l.a.createElement(h.a.Header,{closeButton:!0},l.a.createElement(h.a.Title,null,"Update Profile Pic")),l.a.createElement(h.a.Body,null,l.a.createElement(y.a,{onSubmit:function(e){return K(e,"profile")}},l.a.createElement(b.a,null,l.a.createElement(y.a.File,{id:"profile-pic-upload",custom:!0},l.a.createElement(y.a.File.Input,{onChange:function(e){return Z(e,"profile")}}),l.a.createElement(y.a.File.Label,{"data-browse":"Browse",id:"profile-pic-upload-label"},"Choose Your Pic"),l.a.createElement(y.a.Control.Feedback,{type:"invalid"},"wrong file format (only .jpg and .png allowed)"))),l.a.createElement(w.a,{variant:"primary",type:"submit",id:"upload-profile-button",disabled:!0},"Upload"),"\u2003",l.a.createElement(j.a,{animation:"border",variant:"primary",size:"sm",id:"profile-upload-spinner",style:{display:"none"}})))),l.a.createElement(h.a,Object.assign({show:L,onHide:F},e,{size:"md","aria-labelledby":"contained-modal-title-vcenter",centered:!0,backdrop:"static"}),l.a.createElement(h.a.Header,{closeButton:!0},l.a.createElement(h.a.Title,null,"Update Profile Cover")),l.a.createElement(h.a.Body,null,l.a.createElement(y.a,{onSubmit:function(e){return K(e,"profile-cover")}},l.a.createElement(b.a,null,l.a.createElement(y.a.File,{id:"profile-cover-pic-upload",custom:!0},l.a.createElement(y.a.File.Input,{onChange:function(e){return Z(e,"profile-cover")}}),l.a.createElement(y.a.File.Label,{"data-browse":"Browse",id:"profile-cover-pic-upload-label"},"Choose Your Pic"),l.a.createElement(y.a.Control.Feedback,{type:"invalid"},"wrong file format (only .jpg and .png allowed)"))),l.a.createElement(w.a,{variant:"primary",type:"submit",id:"upload-profile-cover-button",disabled:!0},"Upload"),"\u2003",l.a.createElement(j.a,{animation:"border",variant:"primary",size:"sm",id:"profile-cover-upload-spinner",style:{display:"none"}}))))))};var L=function(e){var t=Object(n.useContext)(M),a=new f.GiphyFetch("tivenjqL1A6W3LpKpPZ4StawMGFAcjdD"),r=Object(n.useState)({}),o=Object(d.a)(r,2),i=o[0],m=o[1],u=Object(n.useState)(!1),p=Object(d.a)(u,2),g=p[0],y=p[1],b=function(){return y(!1)};Object(n.useEffect)((function(){if(Object.keys(t.state).length>0){var e=setInterval((function(){return w()}),2e3);return function(){return clearInterval(e)}}}),[t.state]);var w=function(){fetch("/users/messages",{method:"post",body:JSON.stringify({token:localStorage.getItem("token"),friend_id:t.state.id}),headers:{"content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){"success"===e.saved?(e.length=e.msgs.chat.length,m(e)):m({saved:"unsuccessful"})}))},j=function(e,a){var n=new FormData;n.append(e,a),n.append("friendId",t.state.id),"success"===i.saved?n.append("msgBoxId",i.msgs._id):n.append("msgBoxId",""),fetch("/users/sendMsg",{method:"post",body:n,headers:{token:localStorage.getItem("token")}}).then((function(e){return e.json()})).then((function(t){"success"===t.saved&&("gif"===e&&b(),"text"===e&&(document.getElementById("text").value=""),w())}))},k=function(){var e=Object(s.a)(c.a.mark((function e(t,n){var l,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,a.gif(t.id);case 3:l=e.sent,r=l.data,j("gif",r.images.preview_webp.url);case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();return l.a.createElement("div",{id:"message-left"},0===Object.keys(t.state).length?l.a.createElement("div",{id:"msg-not-selected"},l.a.createElement("h2",null,"You don't have a message selected"),l.a.createElement("span",null,"Select one of your friend to message")):l.a.createElement("div",{id:"msg-box"},l.a.createElement("div",{id:"msg-box-profile"},l.a.createElement("img",{src:t.state.imageUri,alt:t.state.name+" pic"}),l.a.createElement("div",null,l.a.createElement("strong",null,t.state.name),l.a.createElement("br",null),l.a.createElement("span",null,t.state.username))),l.a.createElement(v.a,{variant:"danger",style:{display:"none"},id:"wrong-image-alert"}),l.a.createElement("div",{id:"msg-box-msgs"},void 0!==i.msgs&&i.msgs.chat.map((function(e){var t="",a=document.getElementById("msg-box-msgs");return a.scrollTop=a.scrollHeight,t=e.senderId===localStorage.getItem("id")?"right":"left",e.text?l.a.createElement("div",{key:e._id,class:t},l.a.createElement("li",null,e.text,"\u2002",l.a.createElement("span",null,_()(e.sent_time).format("HH:mm A")))):e.image?l.a.createElement("div",{key:e._id,class:t},l.a.createElement("img",{src:e.image,alt:""}),l.a.createElement("br",null),l.a.createElement("span",null,_()(e.sent_time).format("HH:mm A"))):l.a.createElement("div",{key:e._id,class:t},l.a.createElement("img",{src:e.gif,alt:""}),l.a.createElement("br",null),l.a.createElement("span",null,_()(e.sent_time).format("HH:mm A")))}))),l.a.createElement("div",{id:"msg-box-bottom-div"},l.a.createElement("i",{className:"material-icons",onClick:function(){return document.getElementById("send-image").click()}},"image"),l.a.createElement("i",{className:"material-icons",onClick:function(){return y(!0)}},"gif"),l.a.createElement("input",{type:"text",placeholder:"Type your msg here... press enter to send",id:"text",onKeyDown:function(e){13===e.keyCode&&j("text",document.getElementById("text").value)}}))),l.a.createElement("input",{type:"file",name:"image",id:"send-image",onChange:function(e){var t=e.target.files[0],a=document.getElementById("wrong-image-alert");"image/jpeg"!==t.type&&"image/png"!==t.type?(a.style.display="block",a.innerHTML="Only .jpeg or .png files allowed...",setInterval((function(){return a.style.display="none"}),2e3),e.target.value=""):j("image",t)},style:{display:"none"}}),l.a.createElement(h.a,Object.assign({show:g,onHide:b},e,{size:"md",centered:!0}),l.a.createElement(h.a.Header,{closeButton:!0},l.a.createElement(h.a.Title,null,"Select Gif")),l.a.createElement(h.a.Body,null,l.a.createElement("div",{id:"gif-modal"},l.a.createElement(E.Grid,{fetchGifs:function(e){return a.emoji({offset:e,limit:10})},width:window.matchMedia("(max-width: 480px)").matches?250:450,columns:window.matchMedia("(max-width: 480px)").matches?2:3,hideAttribution:!0,onGifClick:k})))))};var T=function(){var e=Object(p.f)(),t=Object(n.useState)([]),a=Object(d.a)(t,2),r=a[0],o=a[1];Object(n.useEffect)((function(){return i()}),[]);var i=function(){fetch("/users/homePosts",{method:"Post",body:JSON.stringify({token:localStorage.getItem("token")}),headers:{"content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){"success"===e.saved&&(e.details.sort((function(e,t){return new Date(t.sent_time).getSeconds-new Date(e.sent_time).getSeconds})),o(e.details))}))};return l.a.createElement("div",{id:"home-posts"},window.matchMedia("(max-width: 480px)").matches?l.a.createElement("div",{id:"home-profile-div"},l.a.createElement("img",{src:localStorage.getItem("imageUri"),alt:"profile pic",onClick:function(){return e.push("/user/profile/"+localStorage.getItem("username"))}}),l.a.createElement("p",null,l.a.createElement("strong",null," Home"))):l.a.createElement("h2",null,"Home"),l.a.createElement("div",{id:"home-div-posts"},r.length>0?r.map((function(e){return l.a.createElement("div",{key:e._id,className:"user_posts"},l.a.createElement("img",{src:e.user_imageUri,alt:"pic",id:"user-post-img"}),l.a.createElement("div",{id:"post_detail"},l.a.createElement("p",{id:"post-user-detail"},l.a.createElement("strong",null,e.name),"\u2002",l.a.createElement("span",null,e.username," \xb7 ",new Date(e.date).toLocaleDateString("en-us",{day:"numeric",month:"short"}))),l.a.createElement("div",null,e.postText),e.postImg&&l.a.createElement("img",{src:e.postImg,alt:"",id:"post-detail-img"}),e.postGif&&l.a.createElement("div",{id:"post-detail-gif-div"},l.a.createElement("img",{src:e.postGif,alt:""})),l.a.createElement("div",{id:"like-share"},l.a.createElement("span",null,l.a.createElement("i",{className:"material-icons",id:e._id},"thumb_up")," ","\u2002",e.likes),l.a.createElement("span",null,l.a.createElement("i",{className:"material-icons"}," share")," \u2002",e.shares),l.a.createElement("span",null,l.a.createElement("i",{className:"material-icons"}," message")," \u2002",e.comments.length))))})):""))},F=a(125),H=a(67);var U=function(){var e=Object(n.useState)([]),t=Object(d.a)(e,2),a=t[0],r=t[1];Object(n.useEffect)((function(){i()}),[]);var o=Object(n.useContext)(M),i=function(){fetch("/users/friend-list",{method:"POst",body:JSON.stringify({token:localStorage.getItem("token")}),headers:{"content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){"success"===e.saved&&r(e.data)}))};return l.a.createElement("div",{id:"messages-right"},l.a.createElement("p",null,l.a.createElement("strong",null,"Messages")," "),l.a.createElement("div",{id:"msg-people-search"},l.a.createElement(F.a,{className:"mb-3"},l.a.createElement(F.a.Prepend,null,l.a.createElement(F.a.Text,null,l.a.createElement("i",{className:"material-icons"},"\ue8b6"))),l.a.createElement(H.a,{placeholder:"Search your Friends"}))),a.map((function(e){return l.a.createElement("div",{key:e.id,id:"msg-profile-pic",onClick:function(){return o.dispatch({type:"change",payload:e})}},l.a.createElement("img",{src:e.imageUri,alt:e.name+" pic"}),l.a.createElement("div",null,e.name,l.a.createElement("br",null),e.username))})))};var G=function(){var e=Object(n.useContext)(M);return l.a.createElement("div",{class:"main-left"},l.a.createElement(p.c,null,l.a.createElement(p.a,{path:"/user/",exact:!0,component:T}),l.a.createElement(p.a,{path:"/user/profile/:id",component:N}),l.a.createElement(p.a,{path:"/user/messages",component:window.matchMedia("(max-width: 480px)").matches?Object.keys(e.state).length>0?L:U:L})))};var P=function(){var e=Object(n.useState)([]),t=Object(d.a)(e,2),a=t[0],r=t[1];return l.a.createElement("div",{className:"profile-side-bar"},l.a.createElement("form",{onChange:function(e){document.getElementById("search-people-results").style.display="block";var t=e.target.value;""!==t?fetch("/users/search",{method:"post",body:JSON.stringify({value:t}),headers:{"content-type":"application/json"}}).then((function(e){return e.json()})).then(function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()):document.getElementById("search-people-results").style.display="none"}},l.a.createElement(F.a,{className:"mb-3"},l.a.createElement(F.a.Prepend,null,l.a.createElement(F.a.Text,null,l.a.createElement("i",{className:"material-icons"},"\ue8b6"))),l.a.createElement(H.a,{placeholder:"Search your Friends",name:"search"})),l.a.createElement("ul",{id:"search-people-results"},a.map((function(e){return l.a.createElement(g.b,{to:"/user/profile/"+e.username.split("@")[1]},l.a.createElement("li",null,l.a.createElement("img",{src:e.imageUri,alt:"profile"}),l.a.createElement("div",null,e.f_name+" "+e.l_name," ",l.a.createElement("br",null),e.username)))})))))};var D=function(){return l.a.createElement("div",{className:"main-right"},l.a.createElement(p.c,null,l.a.createElement(p.a,{path:"/user/profile/:id",component:P}),l.a.createElement(p.a,{path:"/user/messages",component:U})))},M=l.a.createContext();var A=function(){var e=Object(n.useReducer)((function(e,t){switch(t.type){case"change":return t.payload;default:return e}}),{}),t=Object(d.a)(e,2),a=t[0],r=t[1];return l.a.createElement("div",{id:"main"},l.a.createElement(M.Provider,{value:{state:a,dispatch:r}},l.a.createElement(G,null),l.a.createElement(D,null)))};var J=function(){return l.a.createElement("div",{id:"user"},l.a.createElement(A,null),l.a.createElement(k,null))};var q=function(e){var t=Object(n.useState)(!1),a=Object(d.a)(t,2),r=a[0],o=a[1],i=function(){o(!0),N()},c=Object(n.useState)(!1),s=Object(d.a)(c,2),g=s[0],f=s[1],E=function(){return f(!1)},b=Object(n.useState)({email:"",password:"",method:"native"}),j=Object(d.a)(b,2),k=j[0],I=j[1],O=Object(n.useState)({f_name:"",l_name:"",email:"",password:"",method:"native",imageUri:""}),B=Object(d.a)(O,2),_=B[0],C=B[1],N=function(){var e=document.createElement("script");e.async=!0,e.defer=!0,e.crossorigin="anonymous",e.src="https://connect.facebook.net/en_GB/sdk.js#xfbml=1&version=v6.0&appId=593870491214414&autoLogAppEvents=1",document.head.appendChild(e),T()},L=Object(n.useRef)(),T=function(){var e=document.createElement("script");e.src="https://apis.google.com/js/platform.js?onload=googleSDKLoaded",e.async=!0,e.defer=!0,document.head.appendChild(e),window.googleSDKLoaded=function(){window.gapi.load("auth2",(function(){window.auth2=window.gapi.auth2.init({client_id:"696463816448-rsbv7ci8el2kmd18q582li2832bbuvpl.apps.googleusercontent.com",cookiepolicy:"single_host_origin",scope:"profile email"}),function(){var e=L.current.attributes[0].value;window.auth2.attachClickHandler(L.current,{},(function(t){var a=t.getBasicProfile();"register"===e?(C({f_name:a.getGivenName(),l_name:a.getFamilyName(),email:a.getEmail(),imageUri:a.getImageUrl(),method:"google"}),document.getElementById("register-button").click()):(I({email:a.getEmail(),method:"google",password:"no"}),document.getElementById("login-button").click())}),(function(e){alert(JSON.stringify(e,void 0,2))}))}()}))}},F=function(e,t){var a=document.getElementById(t);if(a.style.display="block",e.error&&(a.innerHTML+=e.error.msg),e.errors){var n=1;e.errors.map((function(e){a.innerHTML+="<p>"+n+". "+e.msg+"<br/></p>",n++}))}setTimeout((function(){a.style.display="none"}),1e4)},H=Object(p.f)(),U=function(e,t){e.preventDefault(),window.FB.login((function(e){"connected"===e.status&&window.FB.api("/me?fields=email"+("register"===t?",first_name,last_name,picture":""),(function(e){"login"===t?(I({email:e.email,method:"facebook",password:"no"}),document.getElementById("login-button").click()):(console.log(e),C({f_name:e.first_name,l_name:e.last_name,email:e.email,imageUri:e.picture.data.url,method:"facebook"}),document.getElementById("register-button").click())}))}),{scope:"public_profile,email"})};return l.a.createElement("div",{id:"home"},l.a.createElement("div",null,"Welcome To InstaChat"),l.a.createElement("div",null,l.a.createElement("button",{onClick:i},"Login"),l.a.createElement("button",{onClick:function(){f(!0),N()}},"Sign Up")),l.a.createElement(h.a,Object.assign({show:r,onHide:function(){return o(!1)}},e,{size:"md","aria-labelledby":"contained-modal-title-vcenter",centered:!0}),l.a.createElement(h.a.Header,{closeButton:!0},l.a.createElement(h.a.Title,null,"Login")),l.a.createElement(h.a.Body,null,l.a.createElement(v.a,{variant:"danger",style:{display:"none"},id:"login-alert"}),l.a.createElement(y.a,{onSubmit:function(e){e.preventDefault();var t=Object(u.a)({},k);fetch("/users/login/",{method:"POST",body:JSON.stringify(t),headers:{"Content-type":"application/json; charset=UTF-8"}}).then((function(e){return e.json()})).then((function(e){console.log(e.saved),"success"===e.saved?(localStorage.setItem("token",e.token),localStorage.setItem("id",e._id),localStorage.setItem("username",e.username),localStorage.setItem("f_name",e.f_name),localStorage.setItem("l_name",e.l_name),localStorage.setItem("imageUri",e.imageUri),H.push("/user/")):F(e,"login-alert")}))},onChange:function(e){var t=e.target.name,a=e.target.value;I(Object(u.a)({},k,Object(m.a)({},t,a)))}},l.a.createElement(y.a.Group,{controlId:"formBasicEmail"},l.a.createElement(y.a.Label,null,"Email address"),l.a.createElement(y.a.Control,{type:"email",placeholder:"Enter email",name:"email"})),l.a.createElement(y.a.Group,{controlId:"formBasicPassword"},l.a.createElement(y.a.Label,null,"Password"),l.a.createElement(y.a.Control,{type:"password",placeholder:"Password",name:"password"})),l.a.createElement(w.a,{variant:"primary",type:"submit",id:"login-button"},"Login"))),l.a.createElement(h.a.Footer,null,l.a.createElement(w.a,{ref:L,button_type:"login"},"Login with Google"),l.a.createElement(w.a,{onClick:function(e){return U(e,"login")}},"Login with FaceBook"))),l.a.createElement(h.a,Object.assign({show:g,onHide:E},e,{size:"md","aria-labelledby":"contained-modal-title-vcenter",centered:!0}),l.a.createElement(h.a.Header,{closeButton:!0},l.a.createElement(h.a.Title,null,"Register")),l.a.createElement(h.a.Body,null,l.a.createElement(v.a,{id:"register-alert",variant:"danger",style:{display:"none"}}),l.a.createElement(y.a,{onSubmit:function(e){e.preventDefault();var t=Object(u.a)({},_);fetch("/users/register/",{method:"POST",body:JSON.stringify(t),headers:{"Content-type":"application/json; charset=UTF-8"}}).then((function(e){return e.json()})).then((function(e){if("success"===e.saved){var t=document.getElementById("register-alert");t.className="fade alert alert-success show",t.style.display="block",t.innerHTML="Registration Successful...\nProceed to Login.",setTimeout((function(){E(),i()}),2e3)}else F(e,"register-alert")}))},onChange:function(e){var t=e.target.name,a=e.target.value;C(Object(u.a)({},_,Object(m.a)({},t,a)))}},l.a.createElement(S.a,null,l.a.createElement(x.a,null,l.a.createElement(y.a.Group,{controlId:"formBasicEmail"},l.a.createElement(y.a.Label,null,"First Name"),l.a.createElement(y.a.Control,{type:"text",placeholder:"First Name",name:"f_name",value:_.f_name,required:!0}))),l.a.createElement(x.a,null,l.a.createElement(y.a.Group,{controlId:"formBasicEmail"},l.a.createElement(y.a.Label,null,"Last Name"),l.a.createElement(y.a.Control,{type:"text",placeholder:"Last Name",name:"l_name",value:_.l_name,required:!0})))),l.a.createElement(y.a.Group,{controlId:"formBasicEmail"},l.a.createElement(y.a.Label,null,"Email address"),l.a.createElement(y.a.Control,{type:"email",placeholder:"Enter email",name:"email",value:_.email,required:!0})),l.a.createElement(y.a.Group,{controlId:"formBasicPassword"},l.a.createElement(y.a.Label,null,"Password"),l.a.createElement(y.a.Control,{type:"password",placeholder:"Password",name:"password",value:_.password})),l.a.createElement(w.a,{variant:"primary",type:"submit",id:"register-button"},"Sign Up"))),l.a.createElement(h.a.Footer,null,l.a.createElement(w.a,{ref:L,button_type:"register"},"SignUp with Google"),l.a.createElement(w.a,{onClick:function(e){return U(e,"register")}},"SignUp with FaceBook"))))};var z=function(){return l.a.createElement("div",{className:"App"},l.a.createElement(g.a,null,l.a.createElement(p.c,null,l.a.createElement(p.a,{path:"/login",exact:!0,component:q}),l.a.createElement(p.a,{path:"/user/",component:J}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},69:function(e,t,a){e.exports=a.p+"static/media/avtar.1e976c46.png"},71:function(e,t,a){e.exports=a(118)},76:function(e,t,a){},97:function(e,t){function a(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}a.keys=function(){return[]},a.resolve=a,e.exports=a,a.id=97}},[[71,1,2]]]);
//# sourceMappingURL=main.ffb274b6.chunk.js.map