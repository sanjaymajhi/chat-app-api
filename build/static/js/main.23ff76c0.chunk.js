(this["webpackJsonpchat-app-client"]=this["webpackJsonpchat-app-client"]||[]).push([[0],{100:function(e,t){function a(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}a.keys=function(){return[]},a.resolve=a,e.exports=a,a.id=100},121:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(18),l=a.n(r),s=(a(79),a(80),a(7)),i=a(10),c=a.n(i),m=a(13),d=a(17),u=a(5),p=a(22),f=a(25),g=a(27),h=a(129),E=a(124),y=a(130),v=a(68),b=a(125),C=a(126);var w=function(e){var t=new f.GiphyFetch("tivenjqL1A6W3LpKpPZ4StawMGFAcjdD"),a=(Object(p.f)(),function(e){var t=document.getElementById("post-"+e+"-select");"emoji"===e?document.getElementById("post-gif-select").style.display="none":document.getElementById("post-emoji-select").style.display="none","block"===t.style.display?t.style.display="none":t.style.display="block"}),n=function(){var a=Object(m.a)(c.a.mark((function a(n,o){var r,l;return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return o.preventDefault(),document.getElementById("post-img-div").style.display="none",document.getElementById("post-gif-div").style.display="block",a.next=5,t.gif(n.id);case 5:return r=a.sent,l=r.data,a.next=9,e.setFormData({"post-text":e.formData["post-text"],"gif-id":l.images.preview_webp.url});case 9:e.setGif(l);case 10:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}();return o.a.createElement("div",null,o.a.createElement(h.a,Object.assign({show:e.ShowCreatePostOrComment,onHide:e.handleCloseCreatePostOrComment},e,{size:"md","aria-labelledby":"contained-modal-title-vcenter",centered:!0}),o.a.createElement(h.a.Header,{closeButton:!0},o.a.createElement(h.a.Title,null,"comment"===e.type?"Write a Comment":"Create Post")),o.a.createElement(h.a.Body,null,o.a.createElement(E.a,{variant:"danger",style:{display:"none"},id:"post-alert"}),o.a.createElement("div",{id:"post-profile-div"},o.a.createElement("img",{src:localStorage.getItem("imageUri"),alt:"profile"}),"\u2003",o.a.createElement("span",null,o.a.createElement("strong",null,localStorage.getItem("f_name")+" "+localStorage.getItem("l_name")))),o.a.createElement(y.a,{onChange:function(t){var a=t.target.name,n=t.target.value;"post-img"===t.target.name?e.setFormData(Object(u.a)({},e.formData,Object(d.a)({},a,t.target.files[0]))):e.setFormData(Object(u.a)({},e.formData,Object(d.a)({},a,n)))},onSubmit:function(t){t.preventDefault(),document.getElementById("post-spinner").style.display="inline-block";var a=new FormData;a.append("post-text",e.formData["post-text"]),a.append("post-gif",e.formData["gif-id"]),a.append("image",e.formData["post-img"]),"comment"===e.type&&a.append("postId",e.postId);var n="comment"===e.type?"/users/profile/post/comment":"commentOnComment"===e.type?"/users/profile/post/commentOnComment":"/users/profile/post/",o=new Headers;o.append("Authorization","Bearer "+localStorage.getItem("token")),fetch(n,{method:"Post",body:a,headers:o}).then((function(e){return e.json()})).then((function(t){if("success"===t.saved){var a=document.getElementById("post-alert");a.className="fade alert alert-success show",a.style.display="block",a.innerHTML="Your details had been saved...",setTimeout((function(){e.handleCloseCreatePostOrComment()}),2e3)}else document.getElementById("post-spinner").style.display="none",function(e){var t=document.getElementById("post-alert");if(t.style.display="block",e.error&&(t.innerHTML+=e.error.msg),e.errors){var a=1;e.errors.map((function(e){t.innerHTML+="<p>"+a+". "+e.msg+"<br/></p>",a++}))}setTimeout((function(){t.style.display="none"}),1e4)}(t)}))}},o.a.createElement(v.a,null,o.a.createElement(y.a.Control,{plaintext:!0,as:"textarea",rows:"3",placeholder:"comment"===e.type?"Type your comment here...":"What's on your mind "+localStorage.getItem("f_name"),name:"post-text",id:"post-text",required:!0})),o.a.createElement(v.a,null,o.a.createElement(y.a.File,{id:"post-pic-upload",custom:!0,style:{display:"none"}},o.a.createElement(y.a.File.Input,{name:"post-img",onChange:function(e){var t=e.target.files[0],a=document.getElementById("post-alert");if("image/jpeg"!==t.type&&"image/png"!==t.type)a.style.display="block",a.innerHTML="Only .jpeg or .png files allowed...",e.target.value="";else{var n=new FileReader;n.onload=function(e){document.getElementById("post-img-show").src=e.target.result},n.readAsDataURL(t),document.getElementById("post-gif-div").style.display="none",document.getElementById("post-img-div").style.display="block"}}}))),o.a.createElement("div",{id:"post-img-div"},o.a.createElement("div",null,o.a.createElement("i",{className:"material-icons",onClick:function(){document.getElementById("post-pic-upload").value="",document.getElementById("post-img-div").style.display="none",e.setFormData({"post-text":e.formData["post-text"]})}}," ","remove_circle"),o.a.createElement("img",{src:"#",alt:"",id:"post-img-show"}))),o.a.createElement("div",{id:"post-gif-div"},e.gif&&o.a.createElement(g.Gif,{gif:e.gif,width:window.matchMedia("(max-width: 480px)").matches?150:200,hideAttribution:!0}),o.a.createElement("i",{className:"material-icons",onClick:function(){e.setGif(null),e.setFormData({"post-text":e.formData["post-text"]}),document.getElementById("post-gif-div").style.display="none"}}," ","remove_circle")),o.a.createElement(b.a,{variant:"primary",type:"submit",id:"post-button",style:{width:"100%"}},o.a.createElement("strong",null,e.type||"Post"),"\u2003",o.a.createElement(C.a,{animation:"border",variant:"dark",size:"sm",id:"post-spinner",style:{display:"none"}})))),o.a.createElement(h.a.Footer,{id:"post-footer"},o.a.createElement("strong",{style:{justifySelf:"left"}},"Add to your ",e.type||"post"),o.a.createElement(b.a,{variant:"light"},o.a.createElement("i",{className:"material-icons",onClick:function(){return document.getElementById("post-pic-upload").click()}},"image")),o.a.createElement(b.a,{variant:"light"}," ",o.a.createElement("i",{className:"material-icons",onClick:function(){return a("gif")}},"gif")),o.a.createElement(b.a,{variant:"light",onClick:function(){return a("emoji")}},o.a.createElement("span",null,"\ud83d\ude04")," "),o.a.createElement("div",{id:"post-emoji-select"}," ",o.a.createElement(g.Grid,{width:window.matchMedia("(max-width: 480px)").matches?250:450,columns:window.matchMedia("(max-width: 480px)").matches?2:3,fetchGifs:function(e){return t.emoji({offset:e,limit:10})},hideAttribution:!0,onGifClick:function(e,t){return n(e,t)}})),o.a.createElement("div",{id:"post-gif-select"}," ",o.a.createElement(g.Grid,{width:window.matchMedia("(max-width: 480px)").matches?250:450,columns:window.matchMedia("(max-width: 480px)").matches?2:3,fetchGifs:function(e){return t.trending({offset:e,limit:10})},hideAttribution:!0,onGifClick:function(e,t){return n(e,t)}})))))},I=a(33),j=o.a.createContext();function F(e,t){switch(t.type){case"setHomePosts":return Object(u.a)({},e,{homePosts:t.payload});case"setPostIdForComment":return Object(u.a)({},e,{postIdForComment:t.payload});case"setShowCreateComment":return Object(u.a)({},e,{ShowCreateComment:t.payload});case"setFormDataForHomeComments":return Object(u.a)({},e,{formDataForHomeComments:t.payload});case"setGifForHomeComments":return Object(u.a)({},e,{gifForHomeComments:t.payload});case"changeUserInfoForMsg":return Object(u.a)({},e,{userInfoForMsg:t.payload});case"setMessages":return Object(u.a)({},e,{messages:t.payload});case"setShowGifsForMsg":return Object(u.a)({},e,{showGifsForMsg:t.payload});case"setFriendList":return Object(u.a)({},e,{friendList:t.payload});case"setGifForPostComment":return Object(u.a)({},e,{setGifForPostComment:t.payload});case"setFormDataForPostComment":return Object(u.a)({},e,{formDataForPostComment:t.payload});case"setShowCreateCommentForCmt":return Object(u.a)({},e,{ShowCreateCommentForCmt:t.payload});case"setPostDetails":return Object(u.a)({},e,{postDetails:t.payload});case"setCommentIdForComment":return Object(u.a)({},e,{commentIdForComment:t.payload});case"setShowEditProfile":return Object(u.a)({},e,{showEditProfile:t.payload});case"setShowEditProfilePic":return Object(u.a)({},e,{showEditProfilePic:t.payload});case"setShowEditProfileCoverPic":return Object(u.a)({},e,{showEditProfileCoverPic:t.payload});case"setProfile":return Object(u.a)({},e,{profile:t.payload});case"setEditProfile":return Object(u.a)({},e,{editProfile:t.payload});case"setSearchResults":return Object(u.a)({},e,{searchResults:t.payload});case"setShowCreatePost":return Object(u.a)({},e,{showCreatePost:t.payload});case"setGifForPost":return Object(u.a)({},e,{gifForPost:t.payload});case"setFormDataForPost":return Object(u.a)({},e,{formDataForPost:t.payload});case"setShowCreateCommentForProfilePosts":return Object(u.a)({},e,{ShowCreateCommentForProfilePosts:t.payload});case"setGifForUserPostsCmnt":return Object(u.a)({},e,{gifForUserPostsCmnt:t.payload});case"setFormDataForUserPostsCmnt":return Object(u.a)({},e,{formDataForUserPostsCmnt:t.payload});case"setPostsObject":return Object(u.a)({},e,{postsObject:t.payload});case"setPostIdForUserPostsComment":return Object(u.a)({},e,{postIdForUserPostsComment:t.payload});case"setShowLogin":return Object(u.a)({},e,{showLogin:t.payload});case"setShowRegister":return Object(u.a)({},e,{showRegister:t.payload});case"setLogin":return Object(u.a)({},e,{Login:t.payload});case"setRegister":return Object(u.a)({},e,{Register:t.payload});case"setNotifics":return Object(u.a)({},e,{notifics:t.payload});default:return e}}var O={showLogin:!1,showRegister:!1,Login:{email:"",password:"",method:"native"},Register:{f_name:"",l_name:"",email:"",password:"",method:"native",imageUri:""},homePosts:[],postIdForComment:"",ShowCreateComment:!1,formDataForHomeComments:{},gifForHomeComments:null,userInfoForMsg:{},messages:{},showGifsForMsg:!1,friendList:[],gifForPostComment:null,formDataForPostComment:{},ShowCreateCommentForCmt:!1,postDetails:{},commentIdForComment:"",showEditProfile:!1,showEditProfilePic:!1,showEditProfileCoverPic:!1,profile:{},editProfile:{f_name:"",l_name:"",bio:"",location:"",username:""},searchResults:[],showCreatePost:!1,gifForPost:null,formDataForPost:{},ShowCreateCommentForProfilePosts:!1,gifForUserPostsCmnt:null,formDataForUserPostsCmnt:{},postsObject:{},postIdForUserPostsComment:"",notifics:[]};function P(e){var t=e.children,a=Object(n.useReducer)(F,O),r=Object(I.a)(a,2),l=r[0],s=r[1];return o.a.createElement(j.Provider,{value:Object(u.a)({},l,{dispatch:s})},t)}j.Consumer;var S=j;var k=function(e){var t=Object(n.useContext)(S),a=function(e){return t.dispatch({type:"setShowCreatePost",payload:e})},r=function(){return a(!0)},l=function(e){return t.dispatch({type:"setFormDataForPost",payload:e})};return o.a.createElement("div",null,o.a.createElement("ul",{id:"side-nav-phone"},o.a.createElement(s.b,{to:"/user/"},o.a.createElement("li",null,o.a.createElement("i",{class:"material-icons"},"store"))),o.a.createElement(s.b,{to:"/user/explore"},o.a.createElement("li",null,o.a.createElement("i",{class:"material-icons"},"explore"))),o.a.createElement(s.b,{to:"/user/notifications"},o.a.createElement("li",null,o.a.createElement("i",{class:"material-icons"},"notifications"))),o.a.createElement(s.b,{to:"/user/messages"},o.a.createElement("li",null,o.a.createElement("i",{class:"material-icons"},"message")))),o.a.createElement("button",{id:"tweet-button-phone",onClick:r},o.a.createElement("i",{class:"material-icons"}," edit")),o.a.createElement("ul",{id:"side-nav"},o.a.createElement(s.b,{to:"/user/"},o.a.createElement("li",null,o.a.createElement("h2",null,"InstaChat"))),o.a.createElement(s.b,{to:"/user/"},o.a.createElement("li",null,o.a.createElement("i",{class:"material-icons"},"store"),"\u2003Home")),o.a.createElement(s.b,{to:"/user/explore"},o.a.createElement("li",null,o.a.createElement("i",{class:"material-icons"},"explore"),"\u2003Explore")),o.a.createElement(s.b,{to:"/user/notifications"},o.a.createElement("li",null,o.a.createElement("i",{class:"material-icons"},"notifications"),"\u2003Notifications")),o.a.createElement(s.b,{to:"/user/messages"},o.a.createElement("li",null,o.a.createElement("i",{class:"material-icons"},"message"),"\u2003Messages")),o.a.createElement(s.b,{to:"/user/profile/"+localStorage.getItem("username")},o.a.createElement("li",null,o.a.createElement("i",{class:"material-icons"},"account_circle"),"\u2003Profile")),o.a.createElement("button",{onClick:r},"Tweet")),o.a.createElement("ul",{id:"side-nav-tablet"},o.a.createElement(s.b,{to:"/user/"},o.a.createElement("li",null,o.a.createElement("h2",null,"InstaChat"))),o.a.createElement(s.b,{to:"/user/"},o.a.createElement("li",null,o.a.createElement("i",{class:"material-icons"},"store"))),o.a.createElement(s.b,{to:"/user/explore"},o.a.createElement("li",null,o.a.createElement("i",{class:"material-icons"},"explore"))),o.a.createElement(s.b,{to:"/user/notifications"},o.a.createElement("li",null,o.a.createElement("i",{class:"material-icons"},"notifications"))),o.a.createElement(s.b,{to:"/user/messages"},o.a.createElement("li",null,o.a.createElement("i",{class:"material-icons"},"message"))),o.a.createElement(s.b,{to:"/user/profile/"+localStorage.getItem("username")},o.a.createElement("li",null,o.a.createElement("i",{class:"material-icons"},"account_circle"))),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("button",{onClick:r,id:"tweet-button-tablet"},o.a.createElement("i",{class:"material-icons"}," edit"))),o.a.createElement(w,Object.assign({},e,{setFormData:l,formData:t.formDataForPost,handleCloseCreatePostOrComment:function(){l({}),a(!1)},setGif:function(e){return t.dispatch({type:"setGifForPost",payload:e})},ShowCreatePostOrComment:t.showCreatePost,gif:t.gifForPost})))},x=a(71),D=a.n(x),B=a(127),_=a(70);var H=function(e){var t=function(e,t){e.preventDefault(),e.target.style.color="#063c5e"===e.target.style.color?"gray":"#063c5e";var a=new Headers;a.append("Authorization","Bearer "+localStorage.getItem("token")),a.append("content-type","application/json"),fetch("/users/posts/"+t,{method:"post",body:JSON.stringify({postId:e.target.id}),headers:a}).then((function(e){return e.json()})).then((function(e){"success"===e.saved&&console.log("done")}))};return o.a.createElement("div",{id:"home-posts"},"home"===e.type?window.matchMedia("(max-width: 480px)").matches?o.a.createElement("div",{id:"home-profile-div"},o.a.createElement("img",{src:localStorage.getItem("imageUri"),alt:"profile pic",onClick:function(){return e.history.push("/user/profile/"+localStorage.getItem("username"))}}),o.a.createElement("p",null,o.a.createElement("strong",null," Home"))):o.a.createElement("h2",null,"Home"):"",o.a.createElement("div",{id:"home"===e.type?"home-div-posts":""},void 0!==e.posts&&e.posts.length>0?e.posts.map((function(a){return o.a.createElement("div",{key:a._id,className:"user_posts"},o.a.createElement("img",{src:"user"===e.type?localStorage.getItem("imageUri"):"home"===e.type?a.user_imageUri:a.userId.imageUri,alt:"pic",id:"user-post-img"}),o.a.createElement("div",{id:"post_detail"},o.a.createElement("p",{id:"post-user-detail"},o.a.createElement("strong",null,"user"===e.type?localStorage.getItem("f_name")+" "+localStorage.getItem("l_name"):"home"===e.type?a.name:a.userId.f_name+" "+a.userId.l_name),"\u2002",o.a.createElement("span",null,"user"===e.type?"@"+e.id:"home"===e.type?a.username:a.userId.username," \xb7 ",new Date(a.date).toLocaleDateString("en-us",{day:"numeric",month:"short"}))),o.a.createElement("div",{onClick:"comment"!==e.type?function(){return e.history.push("/user/post/"+a._id)}:""},a.postText,o.a.createElement("br",null),a.postImg&&o.a.createElement("img",{src:a.postImg,alt:"",id:"post-detail-img"}),a.postGif&&o.a.createElement("div",{id:"post-detail-gif-div"},o.a.createElement("img",{src:a.postGif,alt:""}))),o.a.createElement("div",{id:"like-share"},o.a.createElement("span",{onClick:function(e){return t(e,"like")}},o.a.createElement("i",{className:"material-icons",id:a._id,style:{color:-1===a.likes.indexOf(localStorage.getItem("id"))?"gray":"#063c5e"}},"thumb_up")," ","\u2002",a.likes.length),"comment"!==e.type?o.a.createElement("span",{onClick:function(e){return t(e,"share")}},o.a.createElement("i",{className:"material-icons",id:a._id,style:{color:-1===a.shares.indexOf(localStorage.getItem("id"))?"gray":"#063c5e"}}," ","share")," ","\u2002",a.shares.length):"",o.a.createElement("span",null,o.a.createElement("i",{className:"material-icons",onClick:e.handleShowCreateComment,id:a._id}," ","message")," ","\u2002","comment"!==e.type?a.comments.length:a.sub_comments.length))))})):"home"===e.type?o.a.createElement("h2",null,"No Posts to show... ",o.a.createElement("br",null),"Please follow some peoples..."):"",o.a.createElement(w,Object.assign({},e,{setFormData:e.setFormData,formData:e.formData,handleCloseCreatePostOrComment:e.handleCloseCreatePostOrComment,setGif:e.setGif,ShowCreatePostOrComment:e.ShowCreatePostOrComment,gif:e.gif,type:"cooment"===e.type?"commentOnComment":"comment",postId:e.postId}))))};var L=function(e){var t=Object(n.useContext)(S),a=Object(p.g)().id,r=Object(p.f)(),l=function(e){return t.dispatch({type:"setPostsObject",payload:e})},s=function(e){return t.dispatch({type:"setShowCreateCommentForProfilePosts",payload:e})},i=function(e){return t.dispatch({type:"setFormDataForUserPostsCmnt",payload:e})};Object(n.useEffect)((function(){d()}),[a]);var d=function(){var e=new Headers;e.append("Authorization","Bearer "+localStorage.getItem("token")),fetch("/users/profile/"+a+"/posts",{method:"get",headers:e}).then((function(e){return e.json()})).then(function(){var e=Object(m.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("success"!==t.saved){e.next=3;break}return e.next=3,l(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())};return o.a.createElement(H,Object.assign({},e,{type:"user",history:r,posts:t.postsObject.posts,setPosts:l,setFormData:i,formData:t.formDataForUserPostsCmnt,handleCloseCreatePostOrComment:function(){i({}),s(!1)},setGif:function(e){return t.dispatch({type:"setGifForUserPostsCmnt",payload:e})},ShowCreatePostOrComment:t.ShowCreateCommentForProfilePosts,gif:t.gifForUserPostsCmnt,postId:t.postIdForUserPostsComment,handleShowCreateComment:function(e){var a;a=e.target.id,t.dispatch({type:"setPostIdForUserPostsComment",payload:a}),s(!0)},id:a}))};var G=function(e){var t=Object(n.useContext)(S),a=function(e){return t.dispatch({type:"setShowEditProfile",payload:e})},r=function(){return a(!1)},l=function(e){return t.dispatch({type:"setShowEditProfilePic",payload:e})},s=function(){return l(!1)},i=function(){return l(!0)},f=function(e){return t.dispatch({type:"setShowEditProfileCoverPic",payload:e})},g=function(){return f(!1)},w=function(){return f(!0)},I=Object(p.g)().id;Object(n.useEffect)((function(){j()}),[I]);var j=function(){var e=new Headers;e.append("Authorization","Bearer "+localStorage.getItem("token")),e.append("content-type","application/json"),fetch("/users/profile/",{method:"POST",body:JSON.stringify({username:"@"+I}),headers:e}).then((function(e){return e.json()})).then(function(){var e=Object(m.a)(c.a.mark((function e(a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.dispatch({type:"setProfile",payload:a.details});case 2:localStorage.setItem("f_name",a.details.f_name),localStorage.setItem("l_name",a.details.l_name),localStorage.setItem("imageUri",a.details.imageUri),null!==document.querySelector(".follow-button")&&(document.querySelector(".follow-button").innerHTML=-1===a.details.followers.indexOf(a.id)?"Follow":"Unfollow");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},F=Object(p.f)(),O=function(e){var t=document.getElementById("edit-alert");if(t.style.display="block",e.error&&(t.innerHTML+=e.error.msg),e.errors){var a=1;e.errors.map((function(e){t.innerHTML+="<p>"+a+". "+e.msg+"<br/></p>",a++}))}setTimeout((function(){t.style.display="none"}),1e4)},P=function(e,t){e.preventDefault(),document.getElementById("upload-"+t+"-button").disabled=!0,document.getElementById(t+"-upload-spinner").style.display="inline-block";var a=e.target[0].files[0],n=new FormData;n.append("image",a);var o=new Headers;o.append("Authorization","Bearer "+localStorage.getItem("token")),fetch("/users/profile/upload/"+t,{method:"post",body:n,headers:o}).then((function(e){return e.json()})).then((function(e){"success"===e.saved&&("profile"===t?s():g(),j())}))},k=function(e,t){document.getElementById(t+"-pic-upload").className="custom-file-input "+("image/png"===e.target.files[0].type||"image/jpeg"===e.target.files[0].type?"is-valid":"is-invalid"),document.getElementById(t+"-pic-upload-label").innerHTML=e.target.files[0].name,document.getElementById("upload-"+t+"-button").disabled="is-valid"!==document.getElementById(t+"-pic-upload").className.split(" ")[1]};return o.a.createElement("div",null,o.a.createElement("div",{id:"profile-head"},o.a.createElement("strong",null,t.profile.f_name+" "+t.profile.l_name),o.a.createElement("br",null),t.profile.posts&&t.profile.posts.length," Tweets"),o.a.createElement("div",{id:"body"},""===t.profile.coverImageUri?o.a.createElement("div",{id:"cover-image",onClick:localStorage.getItem("username")===I?w:""}):o.a.createElement("img",{id:"cover-image",src:t.profile.coverImageUri,alt:"cover",onClick:localStorage.getItem("username")===I?w:""}),""===t.profile.imageUri?o.a.createElement("img",{src:D.a,alt:"no profile",id:"profile-pic",onClick:localStorage.getItem("username")===I?i:""}):o.a.createElement("img",{src:t.profile.imageUri,alt:"profile",id:"profile-pic",onClick:localStorage.getItem("username")===I?i:""}),o.a.createElement("div",{id:"profile-div"},o.a.createElement("div",{style:{justifySelf:"right",padding:"0",alignItems:"center"}},localStorage.getItem("username")===I?o.a.createElement("button",{id:"button",className:"edit-button",onClick:function(){return a(!0)}},"Edit Profile"):o.a.createElement("button",{id:"button",className:"follow-button",onClick:function(e){e.preventDefault();var t=new Headers;t.append("Authorization","Bearer "+localStorage.getItem("token")),fetch("/users/profile/"+I+"/follow",{method:"get",headers:t}).then((function(e){return e.json()})).then((function(e){"success"===e.saved&&j()}))}},"Follow")),o.a.createElement("div",null,"\xa0",o.a.createElement("strong",null,t.profile.f_name+" "+t.profile.l_name),o.a.createElement("br",null),"\xa0",o.a.createElement("span",null,t.profile.username)),o.a.createElement("div",null,t.profile.bio),o.a.createElement("div",null,o.a.createElement("span",null,o.a.createElement("i",{class:"material-icons"},"location_on"),t.profile.location+" ","\xa0",o.a.createElement("i",{class:"material-icons"}," date_range")," "," Joined "+new Date(t.profile.join_date).toLocaleDateString("en-US",{month:"long",year:"numeric"}))),o.a.createElement("div",null,"\xa0",o.a.createElement("strong",null,(void 0===t.profile.following?0:t.profile.following.length)+" ")," ",o.a.createElement("span",null,"Following"),"\u2003",o.a.createElement("strong",null," "+(void 0===t.profile.followers?0:t.profile.followers.length)+" "),o.a.createElement("span",null,"Followers")),o.a.createElement("div",{style:{justifySelf:"center",padding:"0"}},o.a.createElement("strong",null,"Tweets")," ")),o.a.createElement("div",null,o.a.createElement(L,null)),o.a.createElement(h.a,Object.assign({show:t.showEditProfile,onHide:r},e,{size:"md","aria-labelledby":"contained-modal-title-vcenter",centered:!0,backdrop:"static",keyboard:!1}),o.a.createElement(h.a.Header,{closeButton:""!==t.profile.username},o.a.createElement(h.a.Title,null,"Edit Profile")),o.a.createElement(h.a.Body,null,o.a.createElement(E.a,{variant:"danger",style:{display:"none"},id:"edit-alert"}),o.a.createElement(y.a,{onChange:function(e){var a,n=e.target.name,o=e.target.value;a=Object(u.a)({},t.editProfile,Object(d.a)({},n,o)),t.dispatch({type:"setEditProfile",payload:a})},onSubmit:function(e){e.preventDefault();var a=Object(u.a)({},t.editProfile),n=new Headers;n.append("Authorization","Bearer "+localStorage.getItem("token")),n.append("content-type","application/json"),fetch("/users/update",{method:"Post",body:JSON.stringify(a),headers:n}).then((function(e){return e.json()})).then((function(e){if("success"===e.saved){var a=document.getElementById("edit-alert");a.className="fade alert alert-success show",a.style.display="block",a.innerHTML="Your details had been saved...",I=t.editProfile.username,localStorage.setItem("username",t.editProfile.username),setTimeout((function(){r()}),2e3),F.push("/user/profile/"+I)}else O(e)}))}},o.a.createElement(B.a,null,o.a.createElement(_.a,null,o.a.createElement(y.a.Group,{controlId:"formBasicFirstName"},o.a.createElement(y.a.Label,null,"First Name"),o.a.createElement(y.a.Control,{type:"text",placeholder:"Enter First Name",name:"f_name",required:!0}))),o.a.createElement(_.a,null,o.a.createElement(y.a.Group,{controlId:"formBasicLastName"},o.a.createElement(y.a.Label,null,"Last Name"),o.a.createElement(y.a.Control,{type:"text",placeholder:"Enter Last Name",name:"l_name",required:!0})))),o.a.createElement(y.a.Group,{controlId:"formBasicUsername"},o.a.createElement(y.a.Label,null,"Username"),o.a.createElement(y.a.Control,{type:"text",placeholder:"Enter Username",name:"username",required:!0})),o.a.createElement(y.a.Group,{controlId:"formBasicBio"},o.a.createElement(y.a.Label,null,"Bio"),o.a.createElement(y.a.Control,{type:"bio",placeholder:"Add Your Bio",name:"bio",required:!0})),o.a.createElement(y.a.Group,{controlId:"formBasicLocation"},o.a.createElement(y.a.Label,null,"Location"),o.a.createElement(y.a.Control,{type:"text",placeholder:"Add Your location",name:"location",required:!0})),o.a.createElement(b.a,{variant:"primary",type:"submit",id:"login-button"},"Save")))),o.a.createElement(h.a,Object.assign({show:t.showEditProfilePic,onHide:s},e,{size:"md","aria-labelledby":"contained-modal-title-vcenter",centered:!0,backdrop:"static"}),o.a.createElement(h.a.Header,{closeButton:!0},o.a.createElement(h.a.Title,null,"Update Profile Pic")),o.a.createElement(h.a.Body,null,o.a.createElement(y.a,{onSubmit:function(e){return P(e,"profile")}},o.a.createElement(v.a,null,o.a.createElement(y.a.File,{id:"profile-pic-upload",custom:!0},o.a.createElement(y.a.File.Input,{onChange:function(e){return k(e,"profile")}}),o.a.createElement(y.a.File.Label,{"data-browse":"Browse",id:"profile-pic-upload-label"},"Choose Your Pic"),o.a.createElement(y.a.Control.Feedback,{type:"invalid"},"wrong file format (only .jpg and .png allowed)"))),o.a.createElement(b.a,{variant:"primary",type:"submit",id:"upload-profile-button",disabled:!0},"Upload"),"\u2003",o.a.createElement(C.a,{animation:"border",variant:"primary",size:"sm",id:"profile-upload-spinner",style:{display:"none"}})))),o.a.createElement(h.a,Object.assign({show:t.showEditProfileCoverPic,onHide:g},e,{size:"md","aria-labelledby":"contained-modal-title-vcenter",centered:!0,backdrop:"static"}),o.a.createElement(h.a.Header,{closeButton:!0},o.a.createElement(h.a.Title,null,"Update Profile Cover")),o.a.createElement(h.a.Body,null,o.a.createElement(y.a,{onSubmit:function(e){return P(e,"profile-cover")}},o.a.createElement(v.a,null,o.a.createElement(y.a.File,{id:"profile-cover-pic-upload",custom:!0},o.a.createElement(y.a.File.Input,{onChange:function(e){return k(e,"profile-cover")}}),o.a.createElement(y.a.File.Label,{"data-browse":"Browse",id:"profile-cover-pic-upload-label"},"Choose Your Pic"),o.a.createElement(y.a.Control.Feedback,{type:"invalid"},"wrong file format (only .jpg and .png allowed)"))),o.a.createElement(b.a,{variant:"primary",type:"submit",id:"upload-profile-cover-button",disabled:!0},"Upload"),"\u2003",o.a.createElement(C.a,{animation:"border",variant:"primary",size:"sm",id:"profile-cover-upload-spinner",style:{display:"none"}}))))))},U=a(19),N=a.n(U);var M=function(e){var t=Object(n.useContext)(S),a=new f.GiphyFetch("tivenjqL1A6W3LpKpPZ4StawMGFAcjdD"),r=function(){return t.dispatch({type:"setShowGifsForMsg",payload:!1})};Object(n.useEffect)((function(){if(Object.keys(t.userInfoForMsg).length>0){var e=setInterval((function(){return l()}),2e3);return document.getElementById("tweet-button-phone").style.display="none",function(){clearInterval(e),document.getElementById("tweet-button-phone").style.display="block"}}}),[t.userInfoForMsg]);var l=function(){var e=new Headers;e.append("Authorization","Bearer "+localStorage.getItem("token")),e.append("content-type","application/json"),fetch("/users/messages",{method:"post",body:JSON.stringify({friend_id:t.userInfoForMsg.id}),headers:e}).then((function(e){return e.json()})).then((function(e){if("success"===e.saved){e.length=e.msgs.chat.length,t.dispatch({type:"setMessages",payload:e});var a=document.getElementById("msg-box-msgs");a.scrollTop=a.scrollHeight}else t.dispatch({type:"setMessages",payload:{saved:"unsuccessful"}})}))},s=function(e,a){var n=new FormData;n.append(e,a),n.append("friendId",t.userInfoForMsg.id),"success"===t.messages.saved?n.append("msgBoxId",t.messages.msgs._id):n.append("msgBoxId","");var o=new Headers;o.append("Authorization","Bearer "+localStorage.getItem("token")),fetch("/users/sendMsg",{method:"post",body:n,headers:o}).then((function(e){return e.json()})).then((function(t){"success"===t.saved&&("gif"===e&&r(),"text"===e&&(document.getElementById("text").value=""),l())}))},i=function(){var e=Object(m.a)(c.a.mark((function e(t,n){var o,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,a.gif(t.id);case 3:o=e.sent,r=o.data,s("gif",r.images.preview_webp.url);case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();return o.a.createElement("div",{id:"message-left"},0===Object.keys(t.userInfoForMsg).length?o.a.createElement("div",{id:"msg-not-selected"},o.a.createElement("h2",null,"You don't have a message selected"),o.a.createElement("span",null,"Select one of your friend to message")):o.a.createElement("div",{id:"msg-box"},o.a.createElement("div",{id:"msg-box-profile"},o.a.createElement("img",{src:t.userInfoForMsg.imageUri,alt:t.userInfoForMsg.name+" pic"}),o.a.createElement("div",null,o.a.createElement("strong",null,t.userInfoForMsg.name),o.a.createElement("br",null),o.a.createElement("span",null,t.userInfoForMsg.username))),o.a.createElement(E.a,{variant:"danger",style:{display:"none"},id:"wrong-image-alert"}),o.a.createElement("div",{id:"msg-box-msgs"},void 0!==t.messages.msgs&&t.messages.msgs.chat.map((function(e){var t="";return t=e.senderId===localStorage.getItem("id")?"right":"left",e.text?o.a.createElement("div",{key:e._id,class:t},o.a.createElement("li",null,e.text,"\u2002",o.a.createElement("span",null,N()(e.sent_time).format("HH:mm A")))):e.image?o.a.createElement("div",{key:e._id,class:t},o.a.createElement("img",{src:e.image,alt:""}),o.a.createElement("br",null),o.a.createElement("span",null,N()(e.sent_time).format("HH:mm A"))):o.a.createElement("div",{key:e._id,class:t},o.a.createElement("img",{src:e.gif,alt:""}),o.a.createElement("br",null),o.a.createElement("span",null,N()(e.sent_time).format("HH:mm A")))}))),o.a.createElement("div",{id:"msg-box-bottom-div"},o.a.createElement("i",{className:"material-icons",onClick:function(){return document.getElementById("send-image").click()}},"image"),o.a.createElement("i",{className:"material-icons",onClick:function(){return t.dispatch({type:"setShowGifsForMsg",payload:!0})}},"gif"),o.a.createElement("input",{type:"text",placeholder:"Type your msg here... press enter to send",id:"text",onKeyDown:function(e){13===e.keyCode&&s("text",document.getElementById("text").value)}}))),o.a.createElement("input",{type:"file",name:"image",id:"send-image",onChange:function(e){var t=e.target.files[0],a=document.getElementById("wrong-image-alert");"image/jpeg"!==t.type&&"image/png"!==t.type?(a.style.display="block",a.innerHTML="Only .jpeg or .png files allowed...",setInterval((function(){return a.style.display="none"}),2e3),e.target.value=""):s("image",t)},style:{display:"none"}}),o.a.createElement(h.a,Object.assign({show:t.showGifsForMsg,onHide:r},e,{size:"md",centered:!0}),o.a.createElement(h.a.Header,{closeButton:!0},o.a.createElement(h.a.Title,null,"Select Gif")),o.a.createElement(h.a.Body,null,o.a.createElement("div",{id:"gif-modal"},o.a.createElement(g.Grid,{fetchGifs:function(e){return a.emoji({offset:e,limit:10})},width:window.matchMedia("(max-width: 480px)").matches?250:450,columns:window.matchMedia("(max-width: 480px)").matches?2:3,hideAttribution:!0,onGifClick:i})))))},T=a(73);var A=function(e){var t=Object(n.useContext)(S),a=Object(p.f)();Object(n.useEffect)((function(){return r()}),[]);var r=function(){var e=new Headers;e.append("Authorization","Bearer "+localStorage.getItem("token")),fetch("/users/homePosts",{method:"get",headers:e}).then((function(e){return e.json()})).then(function(){var e=Object(m.a)(c.a.mark((function e(a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"success"===a.saved&&(a.details.sort((function(e,t){return new Date(t.sent_time).getSeconds-new Date(e.sent_time).getSeconds})),t.dispatch({type:"setHomePosts",payload:Object(T.a)(a.details)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())};return o.a.createElement(H,Object.assign({},e,{type:"home",history:a,posts:t.homePosts,setFormData:function(e){return t.dispatch({type:"setFormDataForHomeComments",payload:e})},formData:t.formDataForHomeComments,handleCloseCreatePostOrComment:function(){t.dispatch({type:"setFormDataForHomeComments",payload:{}}),t.dispatch({type:"setShowCreateComment",payload:!1})},setGifForHomeComments:function(e){return t.dispatch({type:"setGifForHomeComments",payload:e})},ShowCreatePostOrComment:t.ShowCreateComment,gifForHomeComments:t.gifForHomeComments,postId:t.postIdForComment,handleShowCreateComment:function(e){t.dispatch({type:"setPostIdForComment",payload:e.target.id}),t.dispatch({type:"setShowCreateComment",payload:!0})}}))},R=a(128),z=a(69);var q=function(){var e=Object(n.useContext)(S);Object(n.useEffect)((function(){a()}),[]);var t=Object(n.useContext)(S),a=function(){var t=new Headers;t.append("Authorization","Bearer "+localStorage.getItem("token")),fetch("/users/friend-list",{method:"get",headers:t}).then((function(e){return e.json()})).then((function(t){"success"===t.saved&&e.dispatch({type:"setFriendList",payload:t.data})}))};return o.a.createElement("div",{id:"messages-right"},o.a.createElement("p",null,o.a.createElement("strong",null,"Messages")," "),o.a.createElement("div",{id:"msg-people-search"},o.a.createElement(R.a,{className:"mb-3"},o.a.createElement(R.a.Prepend,null,o.a.createElement(R.a.Text,null,o.a.createElement("i",{className:"material-icons"},"\ue8b6"))),o.a.createElement(z.a,{placeholder:"Search your Friends"}))),e.friendList.map((function(e){return o.a.createElement("div",{key:e.id,id:"msg-profile-pic",onClick:function(){return t.dispatch({type:"changeUserInfoForMsg",payload:e})}},o.a.createElement("img",{src:e.imageUri,alt:e.name+" pic"}),o.a.createElement("div",null,e.name,o.a.createElement("br",null),e.username))})))};var J=function(e){var t=Object(p.g)().id,a=Object(n.useContext)(S),r=Object(n.useState)(""),l=Object(I.a)(r,2),s=(l[0],l[1]);Object(n.useEffect)((function(){return h()}),[]);var i=Object(n.useState)(!1),c=Object(I.a)(i,2),m=c[0],d=c[1],u=function(e){return a.dispatch({type:"setFormDataForPostComment",payload:e})},f=function(e){return a.dispatch({type:"setFormDataForCmtOnCmt",payload:e})},g=function(e){return a.dispatch({type:"setShowCreateCommentForCmt",payload:e})},h=function(){var e=new Headers;e.append("Authorization","Bearer "+localStorage.getItem("token")),fetch("/users/post/"+t,{method:"get",headers:e}).then((function(e){return e.json()})).then((function(e){console.log(e),"success"===e.saved&&(a.dispatch({type:"setPostDetails",payload:e.details}),console.log(e.details))}))},E=function(e,a){e.preventDefault();var n=e.target,o=new Headers;o.append("Authorization","Bearer "+localStorage.getItem("token")),o.append("content-type","application/json"),fetch("/users/posts/"+a,{method:"post",body:JSON.stringify({post_id:t}),headers:o}).then((function(e){return e.json()})).then((function(e){"success"===e.saved&&(console.log("done"),n.style.color="blue"===n.style.color?"gray":"blue")}))};return Object.keys(a.postDetails).length>0&&o.a.createElement("div",null,o.a.createElement("div",{id:"single-post-head"},o.a.createElement("h3",null,o.a.createElement("strong",null,"Post"))),o.a.createElement("div",{id:"single-post-profile"},o.a.createElement("img",{src:a.postDetails.imageUri,alt:a.postDetails.name+" profile pic"}),o.a.createElement("div",null,o.a.createElement("strong",null,a.postDetails.name),o.a.createElement("br",null),o.a.createElement("span",null,a.postDetails.username))),o.a.createElement("div",null,o.a.createElement("div",{id:"single-post-detail"},a.postDetails.postText),o.a.createElement("div",{id:"single-post-date"},o.a.createElement("span",null,N()(a.postDetails.date).format("HH:mm A")+" \xb7 "+N()(a.postDetails.date).format("ll"))),o.a.createElement("div",{id:"single-post-likeshare"},o.a.createElement("strong",null,a.postDetails.likes.length),o.a.createElement("span",null," Likes")," \u2003",o.a.createElement("strong",null,a.postDetails.shares.length),o.a.createElement("span",null," Shares")),o.a.createElement("div",{id:"likesharecomment"},o.a.createElement("span",{onClick:function(e){return E(e,"like")},style:{color:-1===a.postDetails.likes.indexOf(localStorage.getItem("id"))?"gray":"blue"}},o.a.createElement("i",{className:"material-icons"},"thumb_up"),"\u2002 Like"),o.a.createElement("span",{onClick:function(e){return E(e,"share")},style:{color:-1===a.postDetails.shares.indexOf(localStorage.getItem("id"))?"gray":"blue"}},o.a.createElement("i",{className:"material-icons"}," share"),"\u2002 Share"),o.a.createElement("span",null,o.a.createElement("i",{className:"material-icons",onClick:function(e){s(e.target.id),d(!0)}}," ","message"),"\u2002 Comment"))),o.a.createElement(H,Object.assign({},e,{type:"comment",posts:a.postDetails.comments,setFormData:f,formData:a.formDataForCmtOnCmt,handleCloseCreatePostOrComment:function(){f({}),g(!1)},setGif:function(e){return a.dispatch({type:"setGifForCommentOnComment",payload:e})},ShowCreatePostOrComment:a.ShowCreateCommentForCmt,gif:a.gifForCommentOnComment,postId:a.commentIdForComment,handleShowCreateComment:function(e){var t;t=e.target.id,a.dispatch({type:"setCommentIdForComment",payload:t}),g(!0)}})),o.a.createElement(w,Object.assign({},e,{setFormData:u,formData:a.formDataForPostComment,handleCloseCreatePostOrComment:function(){u({}),d(!1)},setGif:function(e){return a.dispatch({type:"setGifForPostComment",payload:e})},ShowCreatePostOrComment:m,gif:a.gifForPostComment,type:"comment",postId:t})))};var W=function(){var e=Object(n.useContext)(S),t=new Headers;return t.append("Authorization","Bearer "+localStorage.getItem("token")),Object(n.useEffect)((function(){fetch("/users/notifications",{method:"GET",headers:t}).then((function(e){return e.json()})).then((function(t){"success"===t.saved&&(t.notifics.sort((function(e,t){return new Date(e.datetime).getMilliseconds-new Date(t.datetime).getMilliseconds})),e.dispatch({type:"setNotifics",payload:t.notifics}))}))}),[]),o.a.createElement("div",{id:"notific-div"},console.log(e.notifics),o.a.createElement("div",{id:"notific-head"},o.a.createElement("h3",null,"Notifications")),o.a.createElement("div",{id:"notifics"},e.notifics.length>0?e.notifics.map((function(e){return o.a.createElement("div",{id:"notific"},o.a.createElement("img",{src:e.userWhoPushed.imageUri,alt:e.userWhoPushed.f_name+" pic"}),o.a.createElement("div",null,o.a.createElement("strong",null,e.userWhoPushed._id===localStorage.getItem("id")?"You":e.userWhoPushed.f_name+" "+e.userWhoPushed.l_name)," ",function(e){switch(e){case"share":return"shared your post.";case"like":return"liked your post.";case"comment":return"commented on your post.";default:return"started following you."}}(e.type),o.a.createElement("br",null),o.a.createElement("span",null,N()(e.datetime).fromNow())))})):o.a.createElement("div",{id:"no-notific"},o.a.createElement("h3",null," There are no notifications to show"),o.a.createElement("span",null,"Follow peoples and create posts"))))};var Y=function(){var e=Object(n.useContext)(S);return o.a.createElement("div",{class:"main-left"},o.a.createElement(p.c,null,o.a.createElement(p.a,{path:"/user/",exact:!0,component:A}),o.a.createElement(p.a,{path:"/user/profile/:id",component:G}),o.a.createElement(p.a,{path:"/user/messages",component:window.matchMedia("(min-width: 901px)").matches||Object.keys(e.userInfoForMsg).length>0?M:q}),o.a.createElement(p.a,{path:"/user/post/:id",component:J}),o.a.createElement(p.a,{path:"/user/notifications/",component:W})))};var K=function(){var e=Object(n.useContext)(S);return o.a.createElement("div",{className:"profile-side-bar"},o.a.createElement("form",{onChange:function(t){document.getElementById("search-people-results").style.display="block";var a=t.target.value,n=new Headers;n.append("Authorization","Bearer "+localStorage.getItem("token")),n.append("content-type","application/json"),""!==a?fetch("/users/search",{method:"post",body:JSON.stringify({value:a}),headers:n}).then((function(e){return e.json()})).then(function(){var t=Object(m.a)(c.a.mark((function t(a){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.dispatch({type:"setSearchResults",payload:a});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()):document.getElementById("search-people-results").style.display="none"}},o.a.createElement(R.a,{className:"mb-3"},o.a.createElement(R.a.Prepend,null,o.a.createElement(R.a.Text,null,o.a.createElement("i",{className:"material-icons"},"\ue8b6"))),o.a.createElement(z.a,{placeholder:"Search your Friends",name:"search"})),o.a.createElement("ul",{id:"search-people-results"},e.searchResults.map((function(e){return o.a.createElement(s.b,{to:"/user/profile/"+e.username.split("@")[1]},o.a.createElement("li",null,o.a.createElement("img",{src:e.imageUri,alt:"profile"}),o.a.createElement("div",null,e.f_name+" "+e.l_name," ",o.a.createElement("br",null),e.username)))})))))};var Z=function(){return o.a.createElement("div",{className:"main-right"},o.a.createElement(p.c,null,o.a.createElement(p.a,{path:"/user/profile/:id",component:K}),o.a.createElement(p.a,{path:"/user/messages",component:q})))};var $=function(){return o.a.createElement("div",{id:"main"},o.a.createElement(Y,null),o.a.createElement(Z,null))};var Q=function(){return o.a.createElement("div",{id:"user"},o.a.createElement($,null),o.a.createElement(k,null))};var V=function(e){var t=Object(n.useContext)(S),a=function(e){return t.dispatch({type:"setShowLogin",payload:e})},r=function(){a(!0),m()},l=function(e){return t.dispatch({type:"setShowRegister",payload:e})},s=function(){return l(!1)},i=function(e){return t.dispatch({type:"setLogin",payload:e})},c=function(e){return t.dispatch({type:"setRegister",payload:e})},m=function(){var e=document.createElement("script");e.async=!0,e.defer=!0,e.crossorigin="anonymous",e.src="https://connect.facebook.net/en_GB/sdk.js#xfbml=1&version=v6.0&appId=593870491214414&autoLogAppEvents=1",document.head.appendChild(e),g()},f=Object(n.useRef)(),g=function(){var e=document.createElement("script");e.src="https://apis.google.com/js/platform.js?onload=googleSDKLoaded",e.async=!0,e.defer=!0,document.head.appendChild(e),window.googleSDKLoaded=function(){window.gapi.load("auth2",(function(){window.auth2=window.gapi.auth2.init({client_id:"696463816448-rsbv7ci8el2kmd18q582li2832bbuvpl.apps.googleusercontent.com",cookiepolicy:"single_host_origin",scope:"profile email"}),function(){var e=f.current.attributes[0].value;window.auth2.attachClickHandler(f.current,{},(function(t){var a=t.getBasicProfile();"register"===e?(c({f_name:a.getGivenName(),l_name:a.getFamilyName(),email:a.getEmail(),imageUri:a.getImageUrl(),method:"google"}),document.getElementById("register-button").click()):(i({email:a.getEmail(),method:"google",password:"no"}),document.getElementById("login-button").click())}),(function(e){alert(JSON.stringify(e,void 0,2))}))}()}))}},v=function(e,t){var a=document.getElementById(t);if(a.style.display="block",e.error&&(a.innerHTML+=e.error.msg),e.errors){var n=1;e.errors.map((function(e){a.innerHTML+="<p>"+n+". "+e.msg+"<br/></p>",n++}))}setTimeout((function(){a.style.display="none"}),1e4)},C=Object(p.f)(),w=function(e,t){e.preventDefault(),window.FB.login((function(e){"connected"===e.status&&window.FB.api("/me?fields=email"+("register"===t?",first_name,last_name,picture":""),(function(e){"login"===t?(i({email:e.email,method:"facebook",password:"no"}),document.getElementById("login-button").click()):(console.log(e),c({f_name:e.first_name,l_name:e.last_name,email:e.email,imageUri:e.picture.data.url,method:"facebook"}),document.getElementById("register-button").click())}))}),{scope:"public_profile,email"})};return o.a.createElement("div",{id:"home"},o.a.createElement("div",null,"Welcome To InstaChat"),o.a.createElement("div",null,o.a.createElement("button",{onClick:r},"Login"),o.a.createElement("button",{onClick:function(){l(!0),m()}},"Sign Up")),o.a.createElement(h.a,Object.assign({show:t.showLogin,onHide:function(){return a(!1)}},e,{size:"md","aria-labelledby":"contained-modal-title-vcenter",centered:!0}),o.a.createElement(h.a.Header,{closeButton:!0},o.a.createElement(h.a.Title,null,"Login")),o.a.createElement(h.a.Body,null,o.a.createElement(E.a,{variant:"danger",style:{display:"none"},id:"login-alert"}),o.a.createElement(y.a,{onSubmit:function(e){e.preventDefault();var a=Object(u.a)({},t.Login);fetch("/users/login/",{method:"POST",body:JSON.stringify(a),headers:{"Content-type":"application/json; charset=UTF-8"}}).then((function(e){return e.json()})).then((function(e){"success"===e.saved?(console.log(e),localStorage.setItem("token",e.token),localStorage.setItem("id",e._id),localStorage.setItem("username",e.username),localStorage.setItem("f_name",e.f_name),localStorage.setItem("l_name",e.l_name),localStorage.setItem("imageUri",e.imageUri),C.push("/user/profile/"+e.username)):v(e,"login-alert")}))},onChange:function(e){var a=e.target.name,n=e.target.value;i(Object(u.a)({},t.Login,Object(d.a)({},a,n)))}},o.a.createElement(y.a.Group,{controlId:"formBasicEmail"},o.a.createElement(y.a.Label,null,"Email address"),o.a.createElement(y.a.Control,{type:"email",placeholder:"Enter email",name:"email"})),o.a.createElement(y.a.Group,{controlId:"formBasicPassword"},o.a.createElement(y.a.Label,null,"Password"),o.a.createElement(y.a.Control,{type:"password",placeholder:"Password",name:"password"})),o.a.createElement(b.a,{variant:"primary",type:"submit",id:"login-button"},"Login"))),o.a.createElement(h.a.Footer,null,o.a.createElement(b.a,{ref:f,button_type:"login"},"Login with Google"),o.a.createElement(b.a,{onClick:function(e){return w(e,"login")}},"Login with FaceBook"))),o.a.createElement(h.a,Object.assign({show:t.showRegister,onHide:s},e,{size:"md","aria-labelledby":"contained-modal-title-vcenter",centered:!0}),o.a.createElement(h.a.Header,{closeButton:!0},o.a.createElement(h.a.Title,null,"Register")),o.a.createElement(h.a.Body,null,o.a.createElement(E.a,{id:"register-alert",variant:"danger",style:{display:"none"}}),o.a.createElement(y.a,{onSubmit:function(e){e.preventDefault();var a=Object(u.a)({},t.Register);fetch("/users/register/",{method:"POST",body:JSON.stringify(a),headers:{"Content-type":"application/json; charset=UTF-8"}}).then((function(e){return e.json()})).then((function(e){if("success"===e.saved){var t=document.getElementById("register-alert");t.className="fade alert alert-success show",t.style.display="block",t.innerHTML="Registration Successful...\nProceed to Login.",setTimeout((function(){s(),r()}),2e3)}else v(e,"register-alert")}))},onChange:function(e){var a=e.target.name,n=e.target.value;c(Object(u.a)({},t.Register,Object(d.a)({},a,n)))}},o.a.createElement(B.a,null,o.a.createElement(_.a,null,o.a.createElement(y.a.Group,{controlId:"formBasicEmail"},o.a.createElement(y.a.Label,null,"First Name"),o.a.createElement(y.a.Control,{type:"text",placeholder:"First Name",name:"f_name",value:t.Register.f_name,required:!0}))),o.a.createElement(_.a,null,o.a.createElement(y.a.Group,{controlId:"formBasicEmail"},o.a.createElement(y.a.Label,null,"Last Name"),o.a.createElement(y.a.Control,{type:"text",placeholder:"Last Name",name:"l_name",value:t.Register.l_name,required:!0})))),o.a.createElement(y.a.Group,{controlId:"formBasicEmail"},o.a.createElement(y.a.Label,null,"Email address"),o.a.createElement(y.a.Control,{type:"email",placeholder:"Enter email",name:"email",value:t.Register.email,required:!0})),o.a.createElement(y.a.Group,{controlId:"formBasicPassword"},o.a.createElement(y.a.Label,null,"Password"),o.a.createElement(y.a.Control,{type:"password",placeholder:"Password",name:"password",value:t.Register.password})),o.a.createElement(b.a,{variant:"primary",type:"submit",id:"register-button"},"Sign Up"))),o.a.createElement(h.a.Footer,null,o.a.createElement(b.a,{ref:f,button_type:"register"},"SignUp with Google"),o.a.createElement(b.a,{onClick:function(e){return w(e,"register")}},"SignUp with FaceBook"))))};var X=function(){return o.a.createElement("div",{className:"App"},o.a.createElement(s.a,null,o.a.createElement(P,null,o.a.createElement(p.c,null,o.a.createElement(p.a,{path:"/login",exact:!0,component:V}),o.a.createElement(p.a,{path:"/user/",component:Q})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(X,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},71:function(e,t,a){e.exports=a.p+"static/media/avtar.1e976c46.png"},74:function(e,t,a){e.exports=a(121)},79:function(e,t,a){}},[[74,1,2]]]);
//# sourceMappingURL=main.23ff76c0.chunk.js.map